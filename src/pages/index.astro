---
import BaseLayout from '../layouts/BaseLayout.astro';
import PostCard from '../components/PostCard.astro';
import { getCollection } from 'astro:content';

const featuredPosts = (await getCollection('posts'))
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 6);

const popularPosts = featuredPosts.slice(0, 3);
---

<BaseLayout 
  title="Home | Best Affiliate Product Reviews"
  description="Discover the best products with honest reviews. Find top-rated items with exclusive affiliate deals and recommendations."
>
  <!-- Hero Section -->
  <section class="relative md:min-h-[85vh] flex items-center justify-center overflow-hidden bg-gradient-to-br from-primary/10 via-base-100 to-secondary/10">
    <div class="container mx-auto px-4 relative z-10">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center max-w-7xl mx-auto">
        <!-- Left Column - Text Content -->
        <div class="text-center lg:text-left space-y-8">
          <h1 class="text-5xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-extrabold mb-6 mt-6 lg:mt-0 animate-fade-in-up" style="animation-delay: 0.1s;">
            <span class="hero-title-gradient block leading-tight">
              Find the Best
            </span>
            <span class="hero-title-gradient block leading-tight" style="animation-delay: 0.2s;">
              Products
            </span>
          </h1>
          
          <p class="text-base sm:text-lg md:text-xl lg:text-2xl text-base-content/80 mb-8 leading-relaxed max-w-2xl mx-auto lg:mx-0 animate-fade-in-up" style="animation-delay: 0.3s;">
            Discover honest reviews, expert recommendations, and exclusive deals on top-rated products. Your trusted source for making informed purchase decisions.
          </p>
          
          <div class="flex flex-col sm:flex-row gap-4 sm:gap-5 justify-center lg:justify-start animate-fade-in-up" style="animation-delay: 0.4s;">
            <a href="/posts" class="group relative inline-flex items-center justify-center px-6 sm:px-8 py-3 sm:py-4 text-base sm:text-lg font-bold text-white rounded-xl sm:rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105 active:scale-95">
              <div class="absolute inset-0 bg-gradient-to-r from-primary-600 to-primary-500"></div>
              <div class="absolute inset-0 bg-gradient-to-r from-primary-500 to-primary-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              <span class="relative flex items-center gap-2">
                Browse Reviews
                <svg class="w-4 h-4 sm:w-5 sm:h-5 transform group-hover:translate-x-1 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </span>
            </a>
            
            <a href="/about" class="group relative inline-flex items-center justify-center px-6 sm:px-8 py-3 sm:py-4 text-base sm:text-lg font-bold rounded-xl sm:rounded-2xl overflow-hidden border-2 border-base-content/20 hover:border-primary-500 bg-base-100/50 backdrop-blur-sm hover:bg-base-100 transition-all duration-300 hover:scale-105 active:scale-95 shadow-lg">
              <span class="relative text-base-content group-hover:text-primary-600 transition-colors duration-300">
                Learn More
              </span>
            </a>
          </div>

          <!-- Trust badges -->
          <div class="flex flex-wrap items-center justify-center lg:justify-start gap-4 sm:gap-6 pt-6 sm:pt-8 animate-fade-in-up" style="animation-delay: 0.5s;">
            <div class="flex items-center gap-2 text-xs sm:text-sm text-base-content/70">
              <svg class="w-4 h-4 sm:w-5 sm:h-5 text-primary-500" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
              <span class="font-semibold">1000+ Reviews</span>
            </div>
            <div class="flex items-center gap-2 text-xs sm:text-sm text-base-content/70">
              <svg class="w-4 h-4 sm:w-5 sm:h-5 text-primary-500" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
              <span class="font-semibold">Expert Analysis</span>
            </div>
            <div class="flex items-center gap-2 text-xs sm:text-sm text-base-content/70">
              <svg class="w-4 h-4 sm:w-5 sm:h-5 text-primary-500" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
              <span class="font-semibold">Best Deals</span>
            </div>
          </div>
        </div>
        
        <!-- Right Column - Hero Image with modern effects -->
        <div class="relative lg:block hidden animate-fade-in" style="animation-delay: 0.6s;">
          <div class="relative group">
            <!-- Main image with glass effect -->
            <div class="relative rounded-3xl overflow-hidden shadow-2xl transform group-hover:scale-[1.02] transition-all duration-500">
              <img 
                src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?auto=format&fit=crop&w=1200&q=80" 
                alt="Product reviews and recommendations"
                class="w-full h-auto object-cover"
                loading="eager"
                fetchpriority="high"
                width="600"
                height="600"
              />
              <div class="absolute inset-0 bg-gradient-to-tr from-primary/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            </div>
            
            <!-- Floating card elements -->
            <div class="absolute -bottom-8 -left-8 bg-base-100 rounded-2xl shadow-2xl p-6 glass animate-fade-in-up" style="animation-delay: 0.8s;">
              <div class="flex items-center gap-4">
                <div class="w-12 h-12 bg-primary-500 rounded-xl flex items-center justify-center">
                  <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                  </svg>
                </div>
                <div>
                  <div class="text-2xl font-bold text-base-content">4.9/5</div>
                  <div class="text-sm font-semibold" style="color: #6b7280;">Average Rating</div>
                </div>
              </div>
            </div>
            
            <div class="absolute -top-8 -right-8 bg-base-100 rounded-2xl shadow-2xl px-6 py-4 glass animate-fade-in-down" style="animation-delay: 0.9s;">
              <div class="text-3xl font-bold text-primary-600">50K+</div>
              <div class="text-sm font-semibold" style="color: #6b7280;">Happy Users</div>
            </div>
            
            <!-- Decorative glow -->
            <div class="absolute -bottom-12 -left-12 w-full h-full bg-primary/20 rounded-3xl blur-3xl -z-10 group-hover:bg-primary/30 transition-colors duration-500"></div>
          </div>
        </div>
        
        <!-- Mobile Image - Hidden -->
        <!-- <div class="relative lg:hidden block mt-8 animate-fade-in" style="animation-delay: 0.6s;">
          <div class="relative rounded-3xl overflow-hidden shadow-2xl">
            <img 
              src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?auto=format&fit=crop&w=800&q=80" 
              alt="Product reviews and recommendations"
              class="w-full h-auto object-cover"
              loading="eager"
              fetchpriority="high"
              width="600"
              height="400"
            />
          </div>
        </div> -->
      </div>
    </div>
  </section>

  <style>
    /* Modern gradient text with animation */
    .hero-title-gradient {
      background: linear-gradient(135deg, #0c4a6e, #0284c7, #0ea5e9, #0284c7, #0c4a6e);
      background-size: 200% auto;
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradient-shift 8s ease infinite;
      color: #0c4a6e;
      font-weight: 900;
      letter-spacing: -0.03em;
    }
    
    html[data-theme="dark"] .hero-title-gradient {
      background: linear-gradient(135deg, #e0f2fe, #7dd3fc, #38bdf8, #7dd3fc, #e0f2fe);
      background-size: 200% auto;
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradient-shift 8s ease infinite;
      color: #e0f2fe;
    }

    @keyframes gradient-shift {
      0%, 100% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
    }

    /* Glass morphism styles */
    .glass {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    html[data-theme="dark"] .glass {
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.15);
    }

    /* Optimize animations for performance */
    @media (prefers-reduced-motion: reduce) {
      .hero-title-gradient,
      .animate-pulse-slow,
      .animate-bounce-slow {
        animation: none !important;
      }
    }

    /* Badge colors for better contrast */
    html[data-theme="light"] .bg-primary-100 {
      background-color: #dbeafe;
    }

    html[data-theme="light"] .text-primary-900 {
      color: #0c4a6e;
    }

    html[data-theme="light"] .bg-secondary-100 {
      background-color: #fae8ff;
    }

    html[data-theme="light"] .text-secondary-900 {
      color: #701a75;
    }

    /* Secondary color scheme for dark mode */
    html[data-theme="dark"] .bg-secondary-100 {
      background-color: rgba(168, 85, 247, 0.15);
    }

    html[data-theme="dark"] .text-secondary-900 {
      color: #fae8ff;
    }

    html[data-theme="dark"] .border-secondary-200 {
      border-color: rgba(168, 85, 247, 0.3);
    }

    html[data-theme="dark"] .bg-primary-100 {
      background-color: rgba(56, 189, 248, 0.15);
    }

    html[data-theme="dark"] .text-primary-900 {
      color: #e0f2fe;
    }

    html[data-theme="dark"] .border-primary-200 {
      border-color: rgba(56, 189, 248, 0.3);
    }

    html[data-theme="dark"] .from-secondary-600 {
      --tw-gradient-from: #c026d3;
    }

    html[data-theme="dark"] .to-secondary-400 {
      --tw-gradient-to: #e879f9;
    }
  </style>

  <!-- Featured Products Section -->
  <section class="container mx-auto px-4 py-20 lg:py-28" data-animate>
    <div class="text-center mb-16 max-w-3xl mx-auto">
      <div class="inline-block mb-4">
        <span class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary-100 text-primary-900 text-sm font-bold border border-primary-200">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
          </svg>
          Featured Reviews
        </span>
      </div>
      <h2 class="text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 text-gradient">
        Top-Rated Products
      </h2>
      <p class="text-xl text-base-content/70 leading-relaxed">
        Hand-picked products with the best ratings and honest reviews from our experts
      </p>
    </div>

    {featuredPosts.length > 0 && (
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-10 mb-16">
        {featuredPosts.map((post, index) => (
          <div style={`animation-delay: ${index * 0.1}s`}>
            <PostCard
              title={post.data.title}
              description={post.data.description}
              image={post.data.image}
              date={post.data.date}
              category={post.data.category}
              slug={post.slug}
            />
          </div>
        ))}
      </div>
    )}

    <div class="text-center">
      <a href="/posts" class="group relative inline-flex items-center justify-center gap-3 px-10 py-5 text-lg font-bold rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105 active:scale-95 text-white" style="background: linear-gradient(135deg, #0369a1, #0284c7);">
        <span class="relative flex items-center gap-2">
          View All Reviews
          <svg class="w-5 h-5 transform group-hover:translate-x-1 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6" />
          </svg>
        </span>
      </a>
    </div>
  </section>

  <!-- Popular Products Section -->
  {popularPosts.length > 0 && (
    <section class="bg-gradient-to-br from-base-200 via-base-100 to-base-200 py-20 lg:py-28" data-animate>
      <div class="container mx-auto px-4">
        <div class="text-center mb-16 max-w-3xl mx-auto">
          <div class="inline-block mb-4">
            <span class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-secondary-100 text-secondary-900 text-sm font-bold border border-secondary-200">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
              </svg>
              Most Popular
            </span>
          </div>
          <h2 class="text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6">
            <span class="bg-clip-text text-transparent bg-gradient-to-r from-secondary-600 to-secondary-400">
              Trending Now
            </span>
          </h2>
          <p class="text-xl text-base-content/70 leading-relaxed">
            See what everyone's talking about - our most viewed and recommended products
          </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-10">
          {popularPosts.map((post, index) => (
            <div style={`animation-delay: ${index * 0.1}s`}>
              <PostCard
                title={post.data.title}
                description={post.data.description}
                image={post.data.image}
                date={post.data.date}
                category={post.data.category}
                slug={post.slug}
              />
            </div>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Ad Container -->


  <!-- CTA Section -->
  <section class="relative py-24 lg:py-32 overflow-hidden" data-animate>
    <!-- Background with gradient and decorative elements -->
    <div class="absolute inset-0 bg-gradient-to-br from-primary-600 via-primary-500 to-primary-700"></div>
    <div class="absolute inset-0 overflow-hidden">
      <div class="absolute -top-40 -right-40 w-96 h-96 bg-white/10 rounded-full blur-3xl animate-pulse-slow"></div>
      <div class="absolute -bottom-40 -left-40 w-96 h-96 bg-white/10 rounded-full blur-3xl animate-pulse-slow" style="animation-delay: 1s;"></div>
      <div class="absolute top-1/2 left-1/4 w-64 h-64 bg-white/5 rounded-full blur-3xl animate-pulse-slow" style="animation-delay: 2s;"></div>
      
      <!-- Grid pattern overlay -->
      <div class="absolute inset-0 opacity-10" style="background-image: linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 50px 50px;"></div>
    </div>
    
    <div class="container mx-auto px-4 relative z-10">
      <div class="max-w-5xl mx-auto text-center">
        <div class="mb-8 inline-block animate-fade-in-down">
          <span class="inline-flex items-center gap-2 px-6 py-3 rounded-full bg-white/20 backdrop-blur-md text-white text-sm font-bold border border-white/30 shadow-xl">
            <svg class="w-5 h-5 animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
            Discover Amazing Products Today
          </span>
        </div>
        
        <h2 class="text-4xl md:text-5xl lg:text-7xl font-extrabold text-white mb-8 leading-tight animate-fade-in-up" style="animation-delay: 0.1s;">
          Ready to Find Your<br />
          <span class="bg-clip-text text-transparent bg-gradient-to-r from-white via-blue-100 to-white">
            Next Purchase?
          </span>
        </h2>
        
        <p class="text-xl md:text-2xl text-white/95 mb-12 max-w-3xl mx-auto leading-relaxed font-medium animate-fade-in-up" style="animation-delay: 0.2s;">
          Browse our comprehensive collection of product reviews and get the best deals on top-rated items. Join thousands of satisfied shoppers.
        </p>
        
        <div class="flex flex-col sm:flex-row gap-5 justify-center items-center animate-fade-in-up" style="animation-delay: 0.3s;">
          <a href="/posts" class="group relative inline-flex items-center justify-center gap-3 px-10 py-5 text-lg font-bold rounded-2xl overflow-hidden shadow-2xl transition-all duration-300 hover:scale-105 active:scale-95 text-white" style="background-color: #0369a1;">
            <span class="relative flex items-center gap-2">
              Explore Reviews
              <svg class="w-5 h-5 transform group-hover:translate-x-1 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6" />
              </svg>
            </span>
          </a>
          
          <a href="/about" class="dark:text-white group relative inline-flex items-center justify-center gap-2 px-10 py-5 text-lg font-bold text-white rounded-2xl overflow-hidden border-2 border-white/60 hover:border-white bg-white/10 backdrop-blur-md hover:bg-white/20 transition-all duration-300 hover:scale-105 active:scale-95 shadow-xl">
          <span class="relative text-base-content transition-colors duration-300">
            Learn More
          </span>
          </a>
        </div>

        <!-- Social proof -->
        <div class="mt-16 flex flex-wrap items-center justify-center gap-8 animate-fade-in-up" style="animation-delay: 0.4s;">
          <div class="text-white/90">
            <div class="text-4xl font-bold mb-1">50K+</div>
            <div class="text-sm font-medium text-white/70">Happy Customers</div>
          </div>
          <div class="w-px h-12 bg-white/30"></div>
          <div class="text-white/90">
            <div class="text-4xl font-bold mb-1">1000+</div>
            <div class="text-sm font-medium text-white/70">Product Reviews</div>
          </div>
          <div class="w-px h-12 bg-white/30"></div>
          <div class="text-white/90">
            <div class="text-4xl font-bold mb-1">4.9/5</div>
            <div class="text-sm font-medium text-white/70">Average Rating</div>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

