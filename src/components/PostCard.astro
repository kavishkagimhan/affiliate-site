---
interface Props {
  title: string;
  description: string;
  image?: string;
  date?: Date;
  category?: string;
  slug: string;
}

const { title, description, image = 'https://images.unsplash.com/photo-1499750310107-5fef28a66643?auto=format&fit=crop&w=800&q=80', date, category, slug } = Astro.props;

const formattedDate = date ? new Date(date).toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'short',
  day: 'numeric'
}) : '';
---

<article class="post-card group">
  <div class="post-card-image-wrapper">
    <a href={`/posts/${slug}`} class="post-card-image-link" aria-label={`Read more about ${title}`}>
      <img 
        src={image} 
        alt={title}
        class="post-card-image"
        loading="lazy"
        width="400"
        height="280"
      />
      <div class="post-card-overlay"></div>
      {category && (
        <div class="post-card-category">
          <span class="post-card-category-badge">{category}</span>
        </div>
      )}
    </a>
  </div>
  <div class="post-card-content">
    <h2 class="post-card-title">
      <a href={`/posts/${slug}`} class="post-card-title-link">
        {title}
      </a>
    </h2>
    <p class="post-card-description">{description}</p>
    <div class="post-card-footer">
      {date && (
        <time datetime={date?.toISOString()} class="post-card-description">
          {formattedDate}
        </time>
      )}
      <a href={`/posts/${slug}`} class="post-card-button">
        Read More
        <svg class="post-card-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
        </svg>
      </a>
    </div>
  </div>
</article>

<style>
  .post-card {
    @apply bg-base-100 rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300;
    border: 1px solid transparent;
  }

  .post-card:hover {
    @apply border-primary-200/50;
    transform: translateY(-4px);
  }

  .post-card-image-wrapper {
    @apply relative overflow-hidden;
    aspect-ratio: 16 / 10;
  }

  .post-card-image-link {
    @apply block w-full h-full;
  }

  .post-card-image {
    @apply w-full h-full object-cover transition-transform duration-500;
  }

  .post-card:hover .post-card-image {
    transform: scale(1.05);
  }

  .post-card-overlay {
    @apply absolute inset-0 bg-gradient-to-t from-base-100/80 via-transparent to-transparent opacity-0 transition-opacity duration-300;
  }

  .post-card:hover .post-card-overlay {
    @apply opacity-100;
  }

  .post-card-category {
    @apply absolute top-4 left-4 z-10;
  }

  .post-card-category-badge {
    @apply inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold uppercase tracking-wider;
    @apply bg-primary-500 text-white shadow-lg;
    backdrop-filter: blur(8px);
  }

  .post-card-content {
    @apply p-6;
  }

  .post-card-title {
    @apply text-xl font-bold mb-3 line-clamp-2;
  }

  .post-card-title-link {
    @apply text-base-content hover:text-primary-500 transition-colors duration-200;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .post-card-description {
    @apply text-sm text-base-content/70 mb-5 leading-relaxed;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .post-card-footer {
    @apply flex items-center justify-between pt-4 border-t border-base-300/50;
  }

  .post-card-date {
    @apply text-xs text-base-content/60 font-medium;
  }

  .post-card-button {
    @apply inline-flex items-center gap-2 text-sm font-semibold text-primary-500 hover:text-primary-600 transition-colors duration-200;
  }

  .post-card-arrow {
    @apply w-4 h-4 transition-transform duration-200;
  }

  .post-card-button:hover .post-card-arrow {
    transform: translateX(4px);
  }

  /* Dark mode adjustments */
  html[data-theme="dark"] .post-card {
    border-color: rgba(75, 85, 99, 0.3);
  }

  html[data-theme="dark"] .post-card:hover {
    border-color: rgba(56, 189, 248, 0.5);
  }

  html[data-theme="dark"] .post-card-overlay {
    background: linear-gradient(to top, rgba(17, 24, 39, 0.8), transparent, transparent);
  }

  html[data-theme="dark"] .post-card-description {
    @apply text-gray-50;
  }
</style>

